Introduction
------------
Grouplib is a pure GNU Make library that provides a set of user functions
(which can be called with GNU Make's 'call' command) for managing 
multi-target recipes.

It provides an automagic implementation of the 'sentinel' design
pattern, where .sentinel files are used to handle dependency-tracking
on groups of targets that are generated by a single recipe.

This library provides an automatic version of the following pattern:

```make
TASK1_SRCS = foo bar
	baz bob: .sentinels/_task1.sentinel

.sentinels/_task1.sentinel: foo bar
	touch baz bob
	touch .sentinels/_task1.sentinel

rocklop: baz bob
	touch rocklop
```

Grouplib automatically generates and tracks the sentinel file(s) for
your target group(s), and also adds a special conditionial phony target
that forces a rebuild if any of the files are missing (to harden your
build against external interference or flaky toolchains).

With this library, the example above becomes:
 
```make
include grouplib.mk

$(call group_create,task1,$(TASK1_SRCS),baz bob)

$(call group,task1): $(call group_deps,task1):
	touch baz bob
	$(call group_finish,task1)

rocklop: $(call group_outputs,task1)
	touch rocklop
```
You can make as many groups as you want - this library will keep them all
straight and keep your dependencies managed.

API
---

Getting Grouplib into your Makefile is as easy as including it with include `grouplib.mk`.
Once it's in your Makefile, you get access to all the target-group goodness.

The functions provided by Grouplib are as follows:
 
### Normal use cases ###

`$(call group_create,groupname,group_deps,group_outputs)`  
     Creates a target group.
 
`$(call group,groupname)`  
     Returns a handle to the target group's semaphore. Can be used in a
     dependency to list represent all of the group's outputs. Should be used
     as the sole target of the recipe that builds the target group.
 
`$(call group_deps,groupname)`  
     Returns a list of the group's dependencies. If any of the group's
     outputs are missing, this list includes a special PHONY target that
     forces a rebuild of the target group.

`$(call group_finish,groupname)`  
     Should be called as the last step in the target-group's recipe.
     Creates the sentinel directory if it is missing, and touches the
     target-group's sentinel.
 
### Advanced use cases ###

`$(call group_outputs,groupname)`  
     Convenience function for accessing the outputs assigned to the
     group during group_create.

`$(call group_sentinel,groupname)`  
     Returns the name of the target-group's sentinel. Equivalent to
     $(call group groupname).
 
`$(call group_all_sentinels)`  
     Returns a list of all sentinels currently being managed by
     Grouplib. Can be added to a global 'clean' list if desired.

`$(call group_getdir)`  
     Returns the directory currently being used by Grouplib
     to store its sentinel files. This directory is user-selectable.

`$(call group_setdir,dirname)`  
     Can be used to change Grouplib's sentinel directory to a
     user-specified value.

`$(call group_get_phonies)`  
     Provides a list of Grouplib's phony targets, so that they
     can be added to a .PHONY call if necessary. Note that in
     most cases, it won't be necessary to add them.
